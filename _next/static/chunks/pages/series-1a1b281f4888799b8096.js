(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{7417:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var n=r(5893),o=r(7329),i=r(6156),c=r(5771),s=r(7807),u=r(2584),a=r(4208);function l(e){var t=e.groupedReviews,r=t[0].book.series,o=t[0].book.author;return(0,n.jsxs)("section",{id:(0,a.s)(null===r||void 0===r?void 0:r.name),className:"flex flex-column flex-wrap w-full mb-16",children:[(0,n.jsxs)("header",{className:"mb-8 w-full",children:[(0,n.jsx)("h1",{className:"text-2xl",children:r?(0,n.jsx)(s.Z,{href:r.url,children:r.name}):"No series"}),r?(0,n.jsxs)("h2",{className:"mt-2 text-md text-typography-secondary",children:[(0,n.jsx)("span",{className:"font-thin",children:"by "}),(0,n.jsx)(s.Z,{href:o.url,children:o.name}),(0,n.jsxs)("span",{className:"font-thin",children:[(0,n.jsx)("span",{className:"mx-2",children:"\u2022"}),t.length,"/",r.works.primary]})]}):void 0]}),(0,n.jsx)("div",{className:"flex flex-wrap w-full",children:t.map((function(e){return(0,n.jsx)("div",{className:"mr-4 mb-4",children:(0,n.jsx)(u.Z,{className:"h-32 w-72",book:e.book})},e.book.url)}))})]})}var f=r(4699),p=r(7294),d=r(9682),h=r(3023),O=r(9307),b=r(827),j=r(6166);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e){var t=y(y({},e),{},{payload:e.payload.filter((function(e){return 0!==e.value})).map((function(e){return y(y({},e),{},{unit:" pages"})}))});return(0,n.jsx)(j.x,y({},t))}var g=r(9009);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e){return(0,n.jsx)("div",{style:{width:"100%",height:"100%",position:"relative"},children:(0,n.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:(0,n.jsx)(g.h,w({},e))})})}var k=r(1359),N=r(9490);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z={zone:"utc"};function _(e,t,r){for(var n=[],o=e.startOf(r);o<=t;)n.push(o),o=o.plus((0,i.Z)({},r,1));return n}function E(e){return e.reduce((function(e,t){var r=function(e,t){var r=t.map((function(t){return S(S({},t),{},{pages:+(e*(t.percent/100)).toFixed(2)})}),{}),n=_(N.ou.fromISO(r[0].date,Z),N.ou.fromISO(r[r.length-1].date,Z),"month").map((function(e){return e.toUTC().toISODate()})),c=n.reduce((function(e,t){var n=function(e){return N.ou.fromISO(e,Z).toFormat("yyyy-MM")},i=r.slice().reverse().find((function(e){return n(e.date)===n(t)}));if(i)return[].concat((0,o.Z)(e),[i.pages]);var c=r.slice().reverse().find((function(e){return e.date<t})),s=r.find((function(e){return e.date>t})),u=function(e,t){return N.ou.fromISO(e,Z).diff(N.ou.fromISO(t,Z),["months"]).months},a=s.pages-c.pages,l=u(s.date,c.date),f=u(t,c.date);return[].concat((0,o.Z)(e),[+(a/l*f).toFixed(2)])}),[]).reduce((function(e,t){return[].concat((0,o.Z)(e),[e.length?t-e[e.length-1]:t])}),[]);return n.reduce((function(e,t,r){return S(S({},e),{},(0,i.Z)({},t,c[r]))}),{})}(t.book.pageCount,t.timeline.progress);return Object.entries(r).map((function(r){var n,o,i=(0,f.Z)(r,2),c=i[0],s=i[1];c in e||(e[c]={});var u=null!==(n=null===(o=t.book.series)||void 0===o?void 0:o.name)&&void 0!==n?n:"No series";u in e[c]||(e[c][u]=0),e[c][u]+=Math.round(s)})),e}),{})}function I(e){for(var t=function(t){Object.keys(e[t]).forEach((function(r){return function(t,r){if(0!==e[r][t])for(var n=0,o=[-1,1];n<o.length;n++){var i=o[n];t in e[r+i]||(e[r+i][t]=0)}}(r,t)}))},r=1;r<e.length-1;r++)t(r);return e}var C=r(4311),F=r.n(C),M=function(e){var t=E(e),r=Object.keys(t).sort();return I(_(N.ou.fromISO(r[0]),N.ou.fromISO(r[r.length-1]),"month").map((function(e){return S({yearMonth:e.toFormat("yyyy-MM"),date:e},t[e.toISODate()])})))}(k.A.finishedReading),A=(0,o.Z)(new Set(k.A.finishedReading.map((function(e){var t;return null===(t=e.book.series)||void 0===t?void 0:t.name})))),R=(0,k.F)(400),T=function(e){return R[e%R.length]},L={"1Y":1,"5Y":5,"10Y":10,ALL:null};function Y(){var e=(0,p.useState)(L["5Y"]),t=e[0],r=e[1],o=function(e,t){if(null===t)return e;for(var r,n=e[e.length-1].date.minus({years:t}),o=e.filter((function(e){return e.date>=n}));o.length&&(r=o[0],!(Object.keys(r).length>["date","yearMonth"].length));)o.shift();return o}(M,t);return(0,n.jsx)("article",{className:"h-48 mb-16 w-full",children:(0,n.jsx)(c.V.Consumer,{children:function(e){return e.isTransitioning?void 0:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{children:(0,n.jsxs)(d.T,{data:o,margin:{top:0,right:0,bottom:0,left:0},children:[(0,n.jsx)("defs",{children:A.map((function(e,t){return(0,n.jsxs)("linearGradient",{id:"".concat((0,a.s)(e),"-gradient"),x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,n.jsx)("stop",{offset:"10%",stopColor:T(t),stopOpacity:1}),(0,n.jsx)("stop",{offset:"100%",stopColor:T(t),stopOpacity:0})]},t)}))}),(0,n.jsx)(h.K,{dataKey:"yearMonth",axisLine:!1,tickLine:!1,allowDataOverflow:!1,minTickGap:100,tickFormatter:function(e){return e.split("-")[0]}}),(0,n.jsx)(O.u,{content:v,wrapperClassName:"card"}),A.map((function(e,t){return(0,n.jsx)(b.u,{type:"monotone",dataKey:e,stroke:T(t),fillOpacity:1,fill:"url(#".concat((0,a.s)(e),"-gradient)"),isAnimationActive:!1,onClick:function(){return function(e){document.getElementById((0,a.s)(e)).scrollIntoView({behavior:"smooth"})}(e)}},t)}))]})}),(0,n.jsx)("div",{className:F()["period-select"],children:Object.entries(L).map((function(e){var o=(0,f.Z)(e,2),i=o[0],c=o[1];return(0,n.jsx)("button",{onClick:function(){return r(c)},className:"quiet-btn font-thin "+(c===t?F().selected:""),children:i},i)}))})]})}})})}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=function(e,t){return e.timeline.finished<t.timeline.finished?1:-1};var X=function(e){var t=e.reduce((function(e,t){var r,n,c=null!==(r=null===(n=t.book.series)||void 0===n?void 0:n.url)&&void 0!==r?r:"no-series";return e.hasOwnProperty(c)||(e[c]=[]),V(V({},e),{},(0,i.Z)({},c,[].concat((0,o.Z)(e[c]),[t])))}),{});return Object.values(t).map((function(e){return e.sort(G)})).sort((function(e,t){return e[0].timeline.finished<t[0].timeline.finished?1:-1}))}(k.A.finishedReading);function q(){return(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(Y,{}),X.map((function(e){var t,r;return(0,n.jsx)(l,{groupedReviews:e},(null===(t=e[0].book)||void 0===t||null===(r=t.series)||void 0===r?void 0:r.url)||"no-series")}))]})}},2224:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/series",function(){return r(7417)}])},4311:function(e){e.exports={"period-select":"styles_period-select__2pFH8",selected:"styles_selected__ROhVi"}}},function(e){e.O(0,[774,523,809,22,156,114,888,179],(function(){return t=2224,e(e.s=t);var t}));var t=e.O();_N_E=t}]);